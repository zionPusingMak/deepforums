<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deep Forums</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="./style.css">
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=Ubuntu+Mono:wght@400;700&family=VT323&family=IBM+Plex+Mono:wght@400;500;600&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>

<!-- Overlay -->
<div id="overlay"></div>

<!-- Sidebar -->
<div id="sidebar">
    <div class="sidebar-header">
        <span class="sidebar-label">MENU</span>
        <button id="closeSidebar">âœ•</button>
    </div>

    <nav class="sidebar-nav">
        <a href="#" id="navHome"><i class="fa-solid fa-house"></i> Home</a>
        <a href="#" id="navGlobalChat"><i class="fa-solid fa-earth-americas"></i> Global Chat</a>
        <a href="#" id="navDMs"><i class="fa-solid fa-envelope"></i> Messages</a>
        <a href="#" id="navSettings"><i class="fa-solid fa-gear"></i> Settings</a>
    </nav>

    <div class="sidebar-section">
        <span class="sidebar-label">ONLINE â€” <span id="onlineCount">0</span></span>
        <div id="onlineList"></div>
    </div>
</div>

<!-- Header -->
<header>
    <button id="menuBtn">&#9776;</button>
    <h1 class="logo">DEEP FORUMS</h1>
    <div class="user" id="userBtn">
        <span id="username">guest</span>
    </div>
</header>

<!-- Main (forum/thread list) -->
<main>
    <div id="mainHeader">
        <h2 id="mainTitle" class="section-title">All Forums</h2>
        <button id="newThreadBtn" style="display:none;">+ New Thread</button>
    </div>
    <div id="forumList" class="forum-list"></div>
</main>

<!-- THREAD VIEW -->
<div id="threadView" style="display:none;">
    <div class="thread-unified-block">
        <div id="threadPostContent"></div>
        <div id="commentSection">
            <h3 class="comment-title">Comments</h3>
            <div id="commentList"></div>
        </div>
    </div>
    <div id="commentBar">
        <!-- Media attach button for comments -->
        <label class="chat-attach-btn" for="commentFile" title="Attach image">
            <i class="fa-solid fa-paperclip"></i>
        </label>
        <input type="file" id="commentFile" accept="image/*" style="display:none;">
        <!-- Preview area shown when image is selected -->
        <div id="commentMediaPreview" class="comment-media-preview" style="display:none;">
            <img id="commentMediaPreviewImg" src="" alt="preview">
            <button id="commentMediaClear" title="Remove">âœ•</button>
        </div>
        <textarea id="commentInput" placeholder="Write a comment..." rows="1"></textarea>
        <button id="submitComment">Post</button>
    </div>
</div>

<!-- GLOBAL CHAT VIEW -->
<div id="globalChatView" style="display:none;">
    <div class="chat-warning-bar">
        <div class="chat-warning-track">
            <span>ðŸ’€ NO RULES. NO MODS. NO MERCY. WHAT HAPPENS HERE, STAYS HERE â€” INCLUDING THE TRAUMA. ðŸ’€ ðŸ’€ NO RULES. NO MODS. NO MERCY. WHAT HAPPENS HERE, STAYS HERE â€” INCLUDING THE TRAUMA. ðŸ’€ ðŸ’€ NO RULES. NO MODS. NO MERCY. WHAT HAPPENS HERE, STAYS HERE â€” INCLUDING THE TRAUMA. ðŸ’€</span>
        </div>
    </div>
    <div id="globalChatMessages" class="chat-messages"></div>
    <div id="globalChatBar" class="chat-bar">
        <label class="chat-attach-btn" for="globalChatFile" title="Send image or video">
            <i class="fa-solid fa-paperclip"></i>
        </label>
        <input type="file" id="globalChatFile" accept="image/*,video/*" style="display:none;">
        <textarea id="globalChatInput" placeholder="Type a message..." rows="1"></textarea>
        <button id="globalChatSend">Send</button>
    </div>
</div>

<!-- DM LIST VIEW -->
<div id="dmView" style="display:none;">
    <div id="dmList" class="dm-list"></div>
</div>

<!-- DM CONVERSATION VIEW -->
<div id="dmConvoView" style="display:none;">
    <div id="dmConvoHeader" class="dm-convo-header">
        <span class="dm-convo-with">chatting with</span>
        <span id="dmConvoName" class="dm-convo-name"></span>
    </div>
    <div id="dmMessages" class="chat-messages"></div>
    <div id="dmBar" class="chat-bar">
        <label class="chat-attach-btn" for="dmFile" title="Send image or video">
            <i class="fa-solid fa-paperclip"></i>
        </label>
        <input type="file" id="dmFile" accept="image/*,video/*" style="display:none;">
        <textarea id="dmInput" placeholder="Type a message..." rows="1"></textarea>
        <button id="dmSend">Send</button>
    </div>
</div>

<!-- USER PROFILE VIEW -->
<div id="userProfileView" style="display:none;">
    <div class="user-profile-card">
        <div id="profileAvatarPlaceholder" class="avatar-placeholder-big"></div>
        <img id="profileAvatar" class="avatar-big" src="" alt="" style="display:none;">
        <div class="profile-info">
            <h2 id="profileUsername"></h2>
            <p id="profileBio"></p>
        </div>
        <button id="profileMessageBtn" class="profile-msg-btn"><i class="fa-solid fa-envelope"></i> Message</button>
    </div>
    <div class="profile-threads-section">
        <h3 class="comment-title">Threads</h3>
        <div id="profileThreadList" class="forum-list"></div>
    </div>
</div>

<!-- NEW THREAD MODAL -->
<div id="newThreadModal" class="modal">
    <div class="modal-box">
        <h2>New Thread</h2>
        <label>Title</label>
        <input type="text" id="threadTitleInput" placeholder="Thread title...">
        <label>Content</label>
        <textarea id="threadBodyInput" style="height:120px;" placeholder="What's on your mind?"></textarea>
        <label>Media <span style="color:#555;font-size:10px;">max 3 files (image/video)</span></label>
        <div class="thread-media-inputs">
            <label class="media-pick-btn" for="threadMediaInput">
                <i class="fa-solid fa-plus"></i> Add Media
            </label>
            <input type="file" id="threadMediaInput" accept="image/*,video/*" multiple style="display:none;">
            <span id="threadMediaCount" style="font-size:11px;color:#555;align-self:center;">0 / 3</span>
        </div>
        <div id="threadMediaPreview" class="thread-media-preview-grid"></div>
        <div class="modal-actions">
            <button id="cancelThreadBtn">Cancel</button>
            <button id="saveThreadBtn">Post</button>
        </div>
    </div>
</div>

<!-- PROFILE MODAL (edit own profile) -->
<div id="profileModal" class="modal">
    <div class="modal-box">
        <h2>Edit Profile</h2>
        <label>Photo</label>
        <input type="file" id="avatarInput" accept="image/*">
        <label>Username</label>
        <input type="text" id="editUsername">
        <label>Bio</label>
        <textarea id="editBio"></textarea>
        <div class="modal-actions">
            <button id="cancelProfileBtn">Cancel</button>
            <button id="saveProfileBtn">Save</button>
        </div>
    </div>
</div>

<script type="module" src="./script.js"></script>
</body>
    </html>
